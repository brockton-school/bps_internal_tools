{% extends "base.html" %}
{% block title %}Admin Â· Settings{% endblock %}

{% block content %}
<div class="card">
  <h2 style="margin-top:0">Settings</h2>
  <div class="grid">
    <!-- Roles card -->
    <div class="tile" style="flex-direction:column; align-items:flex-start;">
      <div style="font-weight:800; font-size:1.1rem;">Roles</div>
      <div style="color:var(--muted); margin:6px 0 12px;">
        Control which tools each role can access.
        <br>Roles: {{ stats.role_count }} ({{ stats.active_roles }} active)
      </div>
      <a class="btn" style="width:auto;" href="{{ url_for('admin.roles_page') }}">Manage Roles</a>
    </div>

    <!-- Users card -->
    <div class="tile" style="flex-direction:column; align-items:flex-start;">
      <div style="font-weight:800; font-size:1.1rem;">Users</div>
      <div style="color:var(--muted); margin:6px 0 12px;">
        Create users and assign a single role.
        <br>Users: {{ stats.user_count }} ({{ stats.active_users }} active)
      </div>
      <a class="btn" style="width:auto;" href="{{ url_for('admin.users_page') }}">Manage Users</a>
    </div>

    <!-- Grade Sections card -->
    <div class="tile" style="flex-direction:column; align-items:flex-start;">
      <div style="font-weight:800; font-size:1.1rem;">Grade Sections</div>
      <div style="color:var(--muted); margin:6px 0 12px;">
        Configure grade sections and reference courses.
      </div>
      <a class="btn" style="width:auto;" href="{{ url_for('admin.grade_sections_page') }}">Manage Grade Sections</a>
    </div>

    <!-- System Timezone card -->
    <div class="tile" style="flex-direction:column; align-items:flex-start;">
      <div style="font-weight:800; font-size:1.1rem;">System Timezone</div>
      <div style="color:var(--muted); margin:6px 0 16px;">
        Used when recording submission dates and times in Google Sheets.
      </div>
      <form method="post" action="{{ url_for('admin.update_timezone') }}" style="width:100%;">
        <label for="timezone-select">Current timezone</label>
        <input
          id="timezone-select"
          name="timezone"
          class="input"
          type="text"
          list="timezone-options"
          value="{{ current_timezone }}"
          required
        >
        <datalist id="timezone-options">
          {% for tz in timezone_options %}
            <option value="{{ tz }}"></option>
          {% endfor %}
        </datalist>
        <button class="btn" style="width:auto; margin-top:12px;">Save Timezone</button>
      </form>
    </div>


    <!-- Future settings live here -->
    <div class="tile" style="flex-direction:column; align-items:flex-start; opacity:.7;">
      <div style="font-weight:800; font-size:1.1rem;">Integrations</div>
      <div style="color:var(--muted); margin:6px 0 12px;">
        Google Workspace, directory sync, etc. (coming soon)
      </div>
      <button class="btn secondary" style="width:auto;" disabled>Coming Soon</button>
    </div>
  </div>
</div>
{% endblock %}
