{% extends "base.html" %}
{% block title %}Select Teacher · TOC Attendance{% endblock %}
{% block content %}
  <div class="card">
    <label>Select a grade</label>
    <div class="grid">
      {% for g in grades %}
        <a class="btn" href="{{ url_for('toc.take_attendance_grade', grade=g) }}">{{ g }}</a>
      {% endfor %}
    </div>
  </div>

  <div class="card">
    <label for="q">Search for the teacher you’re covering</label>
    <div class="ac-wrap">
      <input id="q" class="input" type="text" placeholder="Start typing a name…" autocomplete="off" aria-autocomplete="list" aria-controls="ac" aria-expanded="false">
      <div id="ac" class="ac-list" role="listbox"></div>
    </div>
    <button id="clearBtn" class="btn secondary" type="button" style="display:none;">Clear</button>
    <div id="searchMsg" class="notice" style="display:none;"></div>
  </div>
{% endblock %}
{% block scripts %}
<script src="{{ url_for('static', filename='app.js') }}"></script>
<script>
  setupTeacherSearch({
    inputId: 'q',
    listId: 'ac',
    clearId: 'clearBtn',
    searchUrl: '{{ url_for("toc.search_teachers") }}',
    onPick: (teacher) => {
      window.location.href = "{{ url_for('toc.select_course', teacher_id='__ID__') }}".replace('__ID__', encodeURIComponent(teacher.id));
    }
  });
</script>
{% endblock %}
